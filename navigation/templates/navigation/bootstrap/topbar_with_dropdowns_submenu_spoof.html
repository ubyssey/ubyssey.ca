{% load menu_tags %}
{% load cache %}
{% load humanize %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load video_filters %}

<div class="js-dropdown-container"></div>
<div class="menu">

  <a href="#" class="close-modal">
    <i class="fa fa-close"></i>
  </a>
  <p>{{item.text}}</p>
  <ul id="article-list-{{item.text}}" class="article-list">
    {% for item in menu_items %}
    <li><a class="dropdown-item" href="{{ item.href }}">
      <div class="o-article__meta__image">
        {% if item.featured_media.first %}
          {% if item.featured_media.first.image %}
            <div class="o-article__image">
              {% image item.featured_media.first.image fill-250x250-c100 format-webp %}
            </div>
          {% elif item.featured_media.first.video %}
            <div class="o-article__image" style="background-image: url('http://img.youtube.com/vi/{{ item.featured_media.first.video.url|youtube_embed_id|safe }}/0.jpg'); background-size: contain; background-repeat: no-repeat"></div>
          {% endif %}
        {% endif %}
      </div>
      <p>{{ item.text }}</p>
    </a></li>
    {% endfor %}
  </ul>
  <a href="#" id="left-{{item.text}}" class="scroll-arrow">
    <i class="fa-solid fa-chevron-left"></i>
  </a>
  <a href="#" id="right-{{item.text}}" class="scroll-arrow">
    <i class="fa-solid fa-chevron-right"></i>
  </a>
</div>

<script>

  document.getElementById("left-{{item.text}}").addEventListener("click", function(e) {
    e.preventDefault();
    var list = document.getElementById("article-list-{{item.text}}");
    list.scrollLeft = list.scrollLeft - list.offsetWidth;
  });

  document.getElementById("right-{{item.text}}").addEventListener("click", function(e) {
    e.preventDefault();
    var list = document.getElementById("article-list-{{item.text}}");
    list.scrollLeft = list.scrollLeft + list.offsetWidth;
  });
</script>