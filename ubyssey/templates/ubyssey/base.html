{% load static %}
{% load wagtailuserbar %}
<!DOCTYPE html>
<html lang="en">
	{% if request.in_preview_panel %}
    	<base target="_blank">
  	{% endif %}
<head>
	<script async src="https://code.jquery.com/jquery-3.5.1.min.js" type="text/javascript"></script>
	<script defer src="https://kit.fontawesome.com/36b5fcae87.js" crossorigin="anonymous"></script>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	{% block darkmode %}
	<meta name="color-scheme" content="unset">
	<meta name="theme-color" media="(prefers-color-scheme: light)" content="white" />
	<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#041620" />

	<script src="{% static 'ubyssey/js/initializeDarkmode.js' %}" type="text/javascript"></script>
	{% endblock %}
	{% include 'ubyssey/meta_tags.html' %}

	{% block stylesheet %}
	<link rel="stylesheet" href="{% static 'ubyssey/css/main.css' %}" type="text/css" />
	{% endblock %}

	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3D8SDLCGE"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-M3D8SDLCGE');
	</script>

	{% comment %}
	Below script (seemingly) generated by Google Ad Manager
	{% endcomment %}
	<script>
		var googletag = googletag || {}; // Checks if googletag object exists. Creates new object otherwise
		googletag.cmd = googletag.cmd || []; // ditto above for googletag.cmd
		(function () {
			// define anonymous function to be invoked immediately

			// This function creates a <script> element, which will be added to the HTML document
			// First we create a new object that describes our new object
			var gads = document.createElement('script');

			// define the attributes for our new element. It is "async" and has "type = text/javascript"
			gads.defer = true;
			gads.type = 'text/javascript';

			// Check if we're using SSL, then add the appropriate 'src' attribute
			var useSSL = 'https:' == document.location.protocol;
			gads.src = (useSSL ? 'https:' : 'http:') +
				'//securepubads.g.doubleclick.net/tag/js/gpt.js';

			// Looks for "script" elements in the existing HTML document.
			// Inserts this new element we've described before the first of such elements
			// The new script element will take precedence 
			var node = document.getElementsByTagName('script')[0];
			node.parentNode.insertBefore(gads, node);
		})(); // invoke the function
	</script>
	{% block head_scripts %}
	{% endblock %}
</head>

<body>
	<script>
		if (window.devicePixelRatio && devicePixelRatio >= 2) {
			var testElem = document.createElement('div');
			testElem.style.border = '.5px solid transparent';
			document.body.appendChild(testElem);
			if (testElem.offsetHeight == 1) {
				document.querySelector('html').classList.add('hairlines');
			}
			document.body.removeChild(testElem);
		}
	</script>
	<script>
		window.fbRefresh = function () {};
		window.fbAsyncInit = function () {
			FB.init({
				appId: '910205815715611',
				xfbml: true,
				version: 'v2.8'
			});
			window.fbRefresh = FB.XFBML.parse;
		};

		(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) {
				return;
			}
			js = d.createElement(s);
			js.id = id;
			js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8';
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>
	<script>
		window.twttrRefresh = function () {};
		window.twttr = (function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0],
				t = window.twttr || {};
			if (d.getElementById(id)) return t;
			js = d.createElement(s);
			js.id = id;
			js.src = 'https://platform.twitter.com/widgets.js';
			fjs.parentNode.insertBefore(js, fjs);

			t._e = [];
			t.ready = function (f) {
				t._e.push(f);
			};

			t.ready(function () {
				window.twttrRefresh = function () {
					window.twttr.widgets.on('load', function () {});
				};
			});

			return t;
		}(document, 'script', 'twitter-wjs'));
	</script>

	<div id="page-wrapper">
		<div id="cookie-disclaimer">
		</div>
		<div id="adblock-splash">
		</div>
		
		{% block header %}
		{% endblock %}
		<div id="modal" aria-modal="true">
			{% block modal %}{% endblock %}
		</div>

		<div id="search-form">
		</div>
		<div id="content-wrapper">

			{% block pre_main_content %}
			{% endblock %}

			{% block content %}
			{% endblock %}

			{% block footer %}
			{% include 'navigation/footer.html' %}
			{% endblock %}
		</div>
	</div>

	{% comment %}
	Warning: The below script is undocumented, but errors are thrown when using a Full-Width style article if it is
	deleted.
	TODO: figure out what it is, and document it

	<script type="text/javascript">
		(function (e, a) {
			if (!a.__SV) {
				var b = window;
				try {
					var c, l, i, j = b.location,
						g = j.hash;
					c = function (a, b) {
						return (l = a.match(RegExp(b + "=([^&]*)"))) ? l[1] : null
					};
					g && c(g, "state") && (i = JSON.parse(decodeURIComponent(c(g, "state"))), "mpeditor" === i.action && (
						b.sessionStorage.setItem("_mpcehash", g), history.replaceState(i.desiredHash || "", e
							.title, j.pathname + j.search)))
				} catch (m) {}
				var k, h;
				window.mixpanel = a;
				a._i = [];
				a.init = function (b, c, f) {
					function e(b, a) {
						var c = a.split(".");
						2 == c.length && (b = b[c[0]], a = c[1]);
						b[a] = function () {
							b.push([a].concat(Array.prototype.slice.call(arguments,
								0)))
						}
					}
					var d = a;
					"undefined" !== typeof f ? d = a[f] = [] : f = "mixpanel";
					d.people = d.people || [];
					d.toString = function (b) {
						var a = "mixpanel";
						"mixpanel" !== f && (a += "." + f);
						b || (a += " (stub)");
						return a
					};
					d.people.toString = function () {
						return d.toString(1) + ".people (stub)"
					};
					k = "disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user"
						.split(" ");
					for (h = 0; h < k.length; h++) e(d, k[h]);
					a._i.push([b, c, f])
				};
				a.__SV = 1.2;
				b = e.createElement("script");
				b.type = "text/javascript";
				b.async = !0;
				b.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === e.location
					.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ?
					"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" :
					"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";
				c = e.getElementsByTagName("script")[0];
				c.parentNode.insertBefore(b, c)
			}
		})(document, window.mixpanel || []);
		mixpanel.init("4941b226d03a988d5f2bc8fea8e0e70d");
	</script>
	{% endcomment %}
	
	{% comment %} <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> {% endcomment %}

	<script src="{% static 'ubyssey/js/vendors.js' %}" type="text/javascript"></script>
	<script defer src="{% static 'ubyssey/js/main.js' %}" type="text/javascript"></script>
	{% block scripts %}
	<script src="{% static 'ubyssey/js/article.js' %}" type="text/javascript"></script>
	{% endblock %}
	{% wagtailuserbar %}
</body>

</html>